#%RAML 1.0 Library
uses:
  annotations:  ../../global-apis-commons-commons-v0/annotations/annotationsLibrary.raml

  accountNumberFormat: accountNumberFormat.raml
  bank: bank.raml
  address: address.raml
  image: image.raml
  participant: participant.raml
  format: format.raml
  accountType: accountType.raml
  title: title.raml
  status: status.raml
  availableBalance: availableBalance.raml
  disposedBalance: disposedBalance.raml
  joint: joint.raml
  conditions: conditions.raml
  balanceSummary: balanceSummary.raml
  customizedFormat: customizedFormat.raml
  relatedContracts: relatedContracts.raml

types:
  account:
    type: object
    properties:
      accountId:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "NONE"
            output: "REQUIRED"
        type: string
        required: false
        description: |
          Account identifier.
      number:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "NONE"
            output: "REQUIRED"
        type: string
        required: false
        description: |
          Account number. This number consists in an alpha-numerical sequence to identify an account.
      numberType:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "NONE"
            output: "REQUIRED"
        type: accountNumberFormat.accountNumberFormat
        required: false
        description: |
          Type of account number. This type identifies the universal standard of an account number.
      formats:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
          - method: "POST"
            input: "NONE"
            output: "REQUIRED"
        type: format.format[]
        required: false
        description: |
          Other formats associated to the account used to identify it.

      customizedFormats:
        (annotations.bindingDefinition):
          - method: "POST"
            input: "OPTIONAL"
            output: "OPTIONAL"
        type: customizedFormat.customizedFormat[]
        required: false
        description: |
          User custom formats associated to the account used to identify it.

      accountType:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "REQUIRED"
            output: "REQUIRED"
        type: accountType.accountType
        required: false
        description: |
          Type of financial product.

      joint:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "REQUIRED"
            output: "REQUIRED"
        type: joint.joint
        description: |
          Types of joint account.
        required: false

      title:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "REQUIRED"
            output: "REQUIRED"
        type: title.title
        required: false
        description: |
          Title of the financial product. This is the commercial name by which the user knows this product.

      bank:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
          - method: "POST"
            input: "NONE"
            output: "OPTIONAL"
        type: bank.bank
        required: false
        description: |
          Entity associated to the account.

      alias:
        (annotations.bindingDefinition):
          - method: "PATCH"
            input: "OPTIONAL"
            output: "NONE"
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
        type: string
        required: false
        (annotations.countryException):
          - country: US
            description: Alias is optional in the US
        description: |
          User-customizable alias assigned to the account to name the account the way the user likes.

      address:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        type: address.address
        required: false
        description: |
          User\'s address associated to the account.

      openingDate:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        type: date-only
        required: false
        description: |
          String based on ISO-8601 date format for specifying the account creation date.

      cutOffDate:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        type: date-only
        required: false
        description: |
          String based on ISO-8601 date format for specifying the date when the current credit account period ends and the next one starts. All the transactions performed until this date will be added to the next payment term.

      status:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
          - method: "POST"
            input: "NONE"
            output: "REQUIRED"
          - method: "PATCH"
            input: "OPTIONAL"
            output: "NONE"
        type: status.status
        required: false
        description: |
          Current status of the account.

      image:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        type: image.image
        required: false
        description: |
          Image associated to the account.

      currencies:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        type: array
        required: false
        description: |
          Currencies related to the account. Monetary amounts related to the account may be provided in one or many of these currencies.
        items:
          properties:
            currency:
              (annotations.bindingDefinition):
                - method: "GET"
                  input: "NONE"
                  output: "REQUIRED"
                - method: "PATCH"
                  input: "NONE"
                  output: "REQUIRED"
                - method: "POST"
                  input: "NONE"
                  output: "REQUIRED"
              type: string
              required: false
              description: |
                String based on ISO-4217 for specifying the currency.
            isMajor:
              (annotations.bindingDefinition):
                - method: "GET"
                  input: "NONE"
                  output: "REQUIRED"
                - method: "PATCH"
                  input: "NONE"
                  output: "REQUIRED"
                - method: "POST"
                  input: "NONE"
                  output: "REQUIRED"
              type: boolean
              required: false
              description: |
                Flag indicating whether this currency corresponds to the main currency.

      grantedCredits:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        (annotations.countrySpecific):
          - country: CL
            description: For 'Bono FÃ¡cil' accounts, grantedCredits will be set to the total invoicing amount provided the month before.
        type: array
        required: false
        description: |
          Granted credit. This amount may be provided in several currencies (depending on the country). This attribute is mandatory for credit accounts. It\'s represented by the granted credit monetary amount and the currency related to the granted credit amount.
        items:
          properties:
            amount:
              (annotations.bindingDefinition):
                - method: "GET"
                  input: "NONE"
                  output: "REQUIRED"
              type: number
              required: false
              description: |
                Granted credit monetary amount.
            currency:
              (annotations.bindingDefinition):
                - method: "GET"
                  input: "NONE"
                  output: "REQUIRED"
              type: string
              required: false
              description: |
                String based on ISO-4217 for specifying the currency related to the granted credit amount.

      availableBalance:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "REQUIRED"
        type: availableBalance.availableBalance
        required: false
        description: |
          This attribute provides the account balance. This balance may be provided in several currencies (depending on the country).

      disposedBalance:
        (annotations.bindingDefinition):
          - method: "GET"
            input: "NONE"
            output: "OPTIONAL"
        type: disposedBalance.disposedBalance
        required: false
        description: |
          This balance is the total spent amount from granted credit. This attribute is mandatory for credit accounts.

      balanceSummary:
        (annotations.bindingDefinition):
            - method: "GET"
              input: "NONE"
              output: "OPTIONAL"
        type: balanceSummary.balanceSummary
        required: false
        description: |
          Balance summary (expenses and incomes) for the current day.

      participants:
        (annotations.bindingDefinition):
          - method: "POST"
            input: "REQUIRED"
            output: "REQUIRED"
        type: participant.participant[]
        required: false
        description: |
          Account participants. An account participant is any allowed person by the account holder who has permissions over an account to make operations.

      conditions:
        (annotations.bindingDefinition):
          - method: "POST"
            input: "OPTIONAL"
            output: "OPTIONAL"
        type: conditions.conditions
        description: |
          Account conditions.
        required: false

      relatedContracts:
        (annotations.bindingDefinition):
          - method: "POST"
            input: "NONE"
            output: "OPTIONAL"
        type: relatedContracts.relatedContracts
        description: |
          An account can have several related contracts, each one associated with a different type of relationship.
        required: false
